<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DILAN FRIENDS</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap');
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: Inter, system-ui;
      background: radial-gradient(circle at top, #0a2a4f, #020814 65%);
      color: #eaf4ff;
      overflow-x: hidden;
    }

    /* HEADER */
    .header {
      height: 56px;
      background: linear-gradient(180deg, #081f3f, #020814);
      display: flex;
      align-items: center;
      padding: 0 14px;
      box-shadow: 0 0 30px #38bdf855;
      position: sticky;
      top: 0;
      z-index: 50;
    }
    .burger { font-size:22px; cursor:pointer; }
    .title { font-weight:900; }
    .subtitle { font-size:11px; opacity:0.6; }

    /* PROFILE BUTTON */
    .profile-btn {
      margin-left:auto;
      width:36px; height:36px;
      border-radius:50%;
      background:url('https://files.catbox.moe/npkjw9.jpg') center/cover no-repeat;
      border:2px solid #38bdf8;
      cursor:pointer;
      transition:0.3s;
    }
    .profile-btn:hover { transform:scale(1.1); }

    /* APP CONTAINER */
    .app { max-width:420px; margin:auto; padding-bottom:60px; }

    /* CARD */
    .card {
      position: relative;
      margin: 12px 14px;
      border-radius: 18px;
      padding: 16px;
      background: linear-gradient(180deg, #0b2a4a, #06152c);
      border: 1px solid rgba(56,189,248,0.45);
      box-shadow: 0 0 40px rgba(56,189,248,0.35);
      overflow: visible; /* ‚¨ÖÔ∏è PENTING */
    }
    .section { font-weight:900; color:#7dd3fc; margin-bottom:8px; }
    .row, .stat {
      display:flex; justify-content:space-between; padding:7px 0;
      border-bottom:1px solid rgba(255,255,255,0.08);
    }
    .row:last-child, .stat:last-child { border:none; }
    .active { color:#22c55e; font-weight:900; }

    /* INPUT & SELECT */
    input, select {
      width:100%; height:44px;
      border-radius:14px;
      border:1px solid rgba(56,189,248,0.45);
      background:#020814;
      color:#fff;
      padding:0 14px;
      margin-bottom:10px;
      transition:0.3s;
    }
    input:focus, select:focus {
      border-color:#38bdf8;
      box-shadow:0 0 12px #38bdf8;
    }
    input.error, select.error {
      border-color:#ef4444;
      animation:shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
    }
    @keyframes shake {
      10%,90%{transform:translateX(-1px);}
      20%,80{transform:translateX(2px);}
      30%,50%,70%{transform:translateX(-4px);}
      40%,60%{transform:translateX(4px);}
    }
    
    /* DEVELOPER */    
    .dev-links a {
      display:block;
      padding:6px 0 6px 10px;
      font-size:12px;
      opacity:0.8;
      color:#7dd3fc;
      text-decoration:none;
      transition:0.3s;
    }
    .dev-links a:hover {
      opacity:1;
      color:#38bdf8;
    }
    
    .role-select {
      position: relative;
      background: #020814;
      border: 1px solid rgba(56,189,248,0.45);
      border-radius: 14px;
      padding: 12px 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      margin-bottom: 12px;
      z-index: 50;
    }
    
    .role-select .arrow {
      opacity: 0.7;
    }
    
    .role-options div:last-child {
      border-bottom-left-radius: 14px;
      border-bottom-right-radius: 14px;
    }

    .role-select:hover {
      box-shadow: 0 0 14px rgba(56,189,248,0.4);
    }

    .role-options {
      position: absolute;
      left: 0;
      right: 0;
      top: calc(100% + 8px);
      background: #020814;
      border: 1px solid #38bdf8;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 20px 50px rgba(0,0,0,0.8);
      display: none;
      z-index: 9999; /* üî• KUNCI */
    }

    .role-options.show {
       display:block;
    }

    .role-options div {
      padding: 12px 14px;
      cursor: pointer;
      transition: 0.2s;
    }

    .role-options div:hover {
      background: rgba(56,189,248,0.15);
    }
    
    /* SELECT ROLE CUSTOM */
    select {
      width: 100%;
      height: 44px;
      border-radius: 14px;
      border: 1.5px solid rgba(56,189,248,0.45);
      background:
      linear-gradient(180deg, #020814, #06152c);
      color: #eaf4ff;
      padding: 0 44px 0 14px;
      font-weight: 700;
      appearance: none;
      cursor: pointer;
      transition: 0.3s ease;
      box-shadow: inset 0 0 0 rgba(56,189,248,0);
    }

    /* HOVER */
    select:hover {
      border-color: #38bdf8;
      box-shadow: 0 0 14px rgba(56,189,248,0.4);
    }

    /* FOCUS */
    select:focus {
      outline: none;
      border-color: #38bdf8;
      box-shadow: 0 0 18px rgba(56,189,248,0.6);
    }

    /* ICON PANAH */
    select {
      background-image:
      linear-gradient(45deg, transparent 50%, #38bdf8 50%),
      linear-gradient(135deg, #38bdf8 50%, transparent 50%);
      background-position:
      calc(100% - 20px) 18px,
      calc(100% - 14px) 18px;
      background-size: 6px 6px;
      background-repeat: no-repeat;
    }

    /* OPTION */
    select option {
      background: #020814;
      color: #eaf4ff;
      font-weight: 600;
    }

    /* BUTTON */
    button {
      width:100%; height:44px;
      border-radius:14px; border:none; font-weight:900;
      background:linear-gradient(135deg,#38bdf8,#2563eb);
      margin-bottom:8px; cursor:pointer; transition:0.3s;
    }
    button:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(56,189,248,0.5); }
    .btn-outline { background:transparent; border:1.5px solid #38bdf8; color:#7dd3fc; }

    /* SIDEBAR */
    .sidebar {
      position:fixed; top:0; left:-260px; width:260px; height:100%;
      background:#020814; transition:0.35s; z-index:100; padding:14px;
    }
    .sidebar.active { left:0; }
    .sidebar a {
      display:block; padding:10px 0;
      border-bottom:1px solid rgba(255,255,255,0.08);
      color:#cfe9ff; cursor:pointer;
    }
    .sidebar .list { font-size:12px; opacity:0.7; padding:6px 0; }
    .sidebar .logout { color:#ef4444; font-weight:900; margin-top:20px; }

    /* OVERLAY */
    .overlay-bg {
      position:fixed; inset:0; background:rgba(0,0,0,0.65);
      opacity:0; pointer-events:none; transition:0.3s; z-index:90;
    }
    .overlay-bg.show { opacity:1; pointer-events:auto; }
    
    <!-- CSS ANIMASI LIST -->
    .list {
      opacity: 0;
      transform: translateY(-10px);
      transition: all 0.5s ease;
    }
    .list.list-new, .list.fade-in {
      opacity: 1;
      transform: translateY(0);
    }
    .list.list-removed {
      opacity: 0;
      transform: translateX(-100%);
      height: 0;
      margin: 0;
      padding: 0;
      transition: all 0.5s ease;
    }
    .input-added {
      animation: fadeOut 0.5s forwards;
    }
    @keyframes fadeOut {
      to { opacity:0; transform:translateY(-10px); }
    }

    /* MODAL */
    .modal {
      position:fixed; inset:0;
      display:flex; justify-content:center; align-items:center;
      background:rgba(0,0,0,0.7);
      opacity:0; pointer-events:none; transition:0.3s; z-index:120;
    }
    .modal.show { opacity:1; pointer-events:auto; }
    .modal .box {
      width:90%; max-width:360px; border-radius:20px; padding:16px;
      background:#020814;
    }
    .modal .box .profile-img {
      width:90px; height:90px; border-radius:50%;
      background:url('https://files.catbox.moe/npkjw9.jpg') center/cover no-repeat;
      margin:0 auto 10px; border:3px solid #38bdf8;
    }
    .close { text-align:right; cursor:pointer; font-size:20px; color:#7dd3fc; }

    /* TOAST */
    .toast {
      position:fixed; bottom:-100px; left:50%;
      transform:translateX(-50%) scale(0.5);
      padding:14px 22px; border-radius:16px; font-weight:900;
      transition:0.5s ease, transform 0.3s ease; z-index:200; opacity:0;
    }
    .toast.show { bottom:30px; opacity:1; transform:translateX(-50%) scale(1); }
    .toast.success { background:#22c55e; color:#022c22; }
    .toast.info { background:#38bdf8; color:#020814; }
    .toast.error { background:#ef4444; color:#fff; }

    /* WELCOME SLIDER */
    .welcome { height:170px; padding:0; position:relative; overflow:hidden; border-radius:18px; }
    .slides { display:flex; width:200%; height:100%; animation:slideRight 8s infinite ease-in-out; }
    .slide { width:50%; height:100%; background-size:cover; background-position:center; }
    @keyframes slideRight {
      0%,45%{transform:translateX(0);}
      55%,95%{transform:translateX(-50%);}
      100%{transform:translateX(0);}
    }
    .welcome-text {
      position:absolute; inset:0; display:flex; flex-direction:column;
      justify-content:flex-end; padding:16px;
      background:linear-gradient(to top, rgba(2,8,20,0.85), transparent);
    }
    .welcome-text h2 { margin:0; color:#7dd3fc; }
    .welcome-text p { margin:4px 0 0; font-size:12px; }

    /* MUSIC VISUALIZER */
    .visualizer { display:flex; justify-content:center; gap:3px; margin-top:10px; }
    .bar { width:4px; height:5px; background:#38bdf8; border-radius:2px; animation:bounce 1.2s infinite ease-in-out; }
    .bar:nth-child(odd){ background:#2563eb; }
    @keyframes bounce { 0%,100%{height:5px;opacity:0.5;} 50%{height:20px;opacity:1;} }
  </style>
</head>
<body>

<!-- TOAST -->
<div class="toast success" id="toastAdd">‚úÖ Nomor ditambahkan!</div>
<div class="toast error" id="toastDelete">üóë Nomor dihapus!</div>
<div class="toast info" id="toastExists">‚ö†Ô∏è Nomor sudah terdaftar!</div>
<div class="toast info" id="toastNotFound">‚ö†Ô∏è Nomor tidak terdaftar!</div>
<div class="toast info" id="toastCreate">üéâ User berhasil dibuat</div>
<div class="toast success" id="toastPass">üîê Password diganti</div>
<div class="toast error" id="toastError">‚ö†Ô∏è Input tidak boleh kosong</div>
<div class="toast info" id="toastLogout">üö™ Logout berhasil</div>

<!-- SIDEBAR -->
<div class="sidebar" id="side">
  <a onclick="scrollToMenu()">üè† Menu Utama</a>
  <a onclick="openProfile()">üë§ Profil</a>
  <a>üíª Developer</a>
<div class="dev-links">
  <a href="https://wa.me/62895329736703" target="_blank">üì± WhatsApp</a>
  <a href="https://t.me/dilanalow" target="_blank">‚úàÔ∏è Telegram</a>
  <a href="https://www.tiktok.com/@dilannalow" target="_blank">üéµ TikTok</a>
</div>
  <a>‚ù§Ô∏è Credit</a>
  <div id="userList">
    <div class="list">raffi (pt prib)</div>
    <div class="list">razzy (pt prib)</div>
    <div class="list">rulz (pt prib)</div>
    <div class="list">vinxbot (pt prib)</div>
  </div>
  <a class="logout" onclick="logout()">‚Ü© Log Out</a>
</div>
<div class="overlay-bg" id="ov" onclick="toggleSide()"></div>

<!-- PROFILE MODAL -->
<div class="modal" id="modal">
  <div class="box">
    <div class="profile-img"></div>
    <div class="close" onclick="closeProfile()">‚úï</div>
    <div class="row"><span>Username</span><b id="modalUsername">Guest</b></div>
    <div class="row"><span>Role</span><b id="modalRole">User</b></div>
    <input id="newPass" placeholder="Password baru">
    <button onclick="changePassword()">Ganti Password</button>
    <button style="background:#ef4444;color:#fff" onclick="logout()">üö™ Logout</button>
  </div>
</div>

<!-- HEADER -->
<div class="header">
  <div class="burger" onclick="toggleSide()">‚ò∞</div>
  <div style="margin-left:10px">
    <div class="title">DILAN FRIENDS</div>
    <div class="subtitle">Preview</div>
  </div>
  <div class="profile-btn" onclick="openProfile()"></div>
</div>

<div class="app">
  <!-- WELCOME SLIDER -->
<div class="card welcome">
  <div class="slides">
    <div class="slide" style="background-image:url('https://files.catbox.moe/s4zohm.jpg')"></div>
    <div class="slide" style="background-image:url('https://files.catbox.moe/ucl2d9.jpg')"></div>
  </div>
  <div class="welcome-text">
    <h2 id="welcomeUser">Welcome, Guest</h2>
    <p id="welcomeMsg">Thank you for being part of the Dilan Project</p>
  </div>
</div>

<!-- USER INFO -->
<div class="card">
  <div class="section">User Info</div>
  <div class="row"><span>Username</span><b id="infoUsername">Guest</b></div>
  <div class="row"><span>Role</span><b id="infoRole">User</b></div>
  <div class="row"><span>Status</span><b class="active">‚óè Active</b></div>
</div>


<script>
 Ambil data dari sessionStorage (diisi saat login)  
const username = sessionStorage.getItem("username") || "Guest";  
const role = sessionStorage.getItem("role") || "User";  
  
// Update welcome slider  
document.getElementById("welcomeUser").innerText = `Welcome, ${username}`;  
document.getElementById("welcomeMsg").innerText = `Thank you for being part of the Dilan Project`;  
  
// Update user info card  
document.getElementById("infoUsername").innerText = username;  
document.getElementById("infoRole").innerText = role;  
  
// Update modal profil  
document.getElementById("modalUsername").innerText = username;  
document.getElementById("modalRole").innerText = role;  
</script>
  <!-- MANAGE NOMOR -->
  <div class="card">
    <div class="section">Manage Nomor</div>
    <input id="num" placeholder="Nomor (628...)">
    <button onclick="addData()">Tambah Nomor</button>
    <button onclick="deleteData(document.getElementById('num').value)">Hapus Nomor</button>
    <div class="visualizer">
      <div class="bar"></div><div class="bar"></div><div class="bar"></div>
      <div class="bar"></div><div class="bar"></div>
    </div>
  </div>
  
  <!-- CREATE USER -->
  <div class="card">
  <div class="section">Create User</div>

  <input id="user" placeholder="Username baru">
  <input id="pass" placeholder="Password baru">

  <!-- CUSTOM ROLE (FIXED) -->
  <div class="role-select" id="roleSelect">
  <span id="roleText">Pilih Role</span>
  <span class="arrow" id="roleArrow">‚ñæ</span>

  <div class="role-options" id="roleOptions">
    <div data-role="Reseller">Reseller</div>
    <div data-role="Partner">Partner</div>
    <div data-role="Tangan kanan">Tangan kanan</div>
    <div data-role="Moderator">Moderator</div>
  </div>
</div>

  <!-- hidden input biar JS lama tetap jalan -->
  <input type="hidden" id="role">

  <button onclick="createUser()">Create</button>
</div>

  <!-- STATISTICS -->
  <div class="card">
    <div class="section">Statistics</div>
    <div class="stat"><span>Total Reseller SC</span><b>32</b></div>
    <div class="stat"><span>Total Partner SC</span><b>2</b></div>
    <div class="stat"><span>Total Tangan Kanan</span><b>1</b></div>
    <div class="stat"><span>Total Moderator</span><b>5</b></div>
  </div>

  <!-- ACCESS & SCRIPT -->
  <div class="card">
    <div class="section">Access & Script</div>
    <button class="btn-outline" onclick="window.open('https://t.me/dilanalow','_blank')">üîì BUY ACCESS</button>
    <button class="btn-outline" onclick="window.open('https://wa.me/62895329736703','_blank')">üì± Hubungi WA</button>
    <button class="btn-outline">‚¨á DOWNLOAD EMPERIOR V4</button>
  </div>
</div>

<!-- MUSIC -->
<audio id="bgMusic" loop>
  <source src="https://files.catbox.moe/6hkktg.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
const side = document.getElementById("side");
const ov = document.getElementById("ov");
const modal = document.getElementById("modal");
const userList = document.getElementById("userList");
const music = document.getElementById("bgMusic");

const TELEGRAM = {  
  BOT_TOKEN: "8335332918:AAEGE5jb9mL-UE0enMgZQelXu9s_Eg8-lu8",  
  CHAT_ID: "8431571090"  
};  

const config = {  
  githubname: "DlanNewEra",  
  githubRepo: "Emperior-V3",  
  githubFile: "dilan.json",  
  TokenGithub: "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"  
};  

let db = [];
let allowedRoleFromBot = ""; // Role yang dikirim dari bot Telegram

// MUSIC autoplay after first click
document.body.addEventListener('click',(e)=>{
  if(e.target.closest('.role-select')) return;
  if(music.paused) music.play();
},{once:true});

// SIDEBAR
function toggleSide() {
  side.classList.toggle("active");
  ov.classList.toggle("show");
}

// MODAL
function openProfile(){modal.classList.add("show")}
function closeProfile(){modal.classList.remove("show")}
modal.onclick=function(e){if(e.target===this) closeProfile()}

// ERROR INPUT
function errorInput(el){el.classList.add("error"); showToast("toastError"); setTimeout(()=>el.classList.remove("error"),400);}

// TELEGRAM
async function sendTelegram(text){  
  if(!TELEGRAM.BOT_TOKEN || !TELEGRAM.CHAT_ID) return;  
  const url = `https://api.telegram.org/bot${TELEGRAM.BOT_TOKEN}/sendMessage`;  
  try{ await axios.post(url,{ chat_id: TELEGRAM.CHAT_ID, text, parse_mode: "HTML" }); } 
  catch(e){ console.log("Telegram error", e); }  
}

// DATABASE FUNCTIONS
async function loadDB(){  
  try{
    const res = await axios.get(`https://api.github.com/repos/${config.githubname}/${config.githubRepo}/contents/${config.githubFile}`,{ headers:{Authorization:`token ${config.TokenGithub}`} });  
    const content = atob(res.data.content);  
    const json = JSON.parse(content);  
    db = Array.isArray(json.dbnya)?json.dbnya:[];  
  }catch(e){ console.log("Load DB error", e); db=[]; }  
}  

async function saveDB(){  
  try{  
    const res = await axios.get(`https://api.github.com/repos/${config.githubname}/${config.githubRepo}/contents/${config.githubFile}`,{ headers:{Authorization:`token ${config.TokenGithub}`} });  
    const sha = res.data.sha;  
    await axios.put(`https://api.github.com/repos/${config.githubname}/${config.githubRepo}/contents/${config.githubFile}`,{ message:"Update DB", content:btoa(JSON.stringify({dbnya:db},null,2)), sha },{ headers:{Authorization:`token ${config.TokenGithub}`} });  
  }catch(e){ console.log("Save DB error", e); }  
}  

function genLogID(){ return Math.random().toString(36).substr(2,8).toUpperCase(); }
function getDevice(){return navigator.platform;}
function getBrowser(){return navigator.userAgent;}
function execTime(start){return ((performance.now()-start)/1000).toFixed(2)+'s';}

// MANAGE NOMOR DENGAN ANIMASI
// Fungsi tambah nomor
async function addData(){  
  const start = performance.now();  
  const input = document.getElementById("num");  
  if(!input.value) return errorInput(input);  

  if(db.includes(input.value)){
    showToast("toastExists"); 
    return;
  }  

  db.push(input.value);  
  await saveDB();  
  const logID = genLogID();  

  // Telegram di background
  (async()=>{ 
    await sendTelegram(
      `üü¢ <b>EMPERIOR SYSTEM ¬∑ CORE</b>
      ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
      ‚ö° <b>DATABASE INJECTION</b>
      üì± <b>Target</b>
      <code>${input.value}</code>
      üì¶ <b>Total Records</b>
      ${db.length}
      üßæ <b>Log ID</b>
      <code>${logID}</code>
      üì± <b>Device</b>
      ${getDevice()} / ${getBrowser()}
      ‚è±Ô∏è <b>Exec Time</b>
      ${execTime(start)}
      üîê <b>Access</b>
      Administrator
      üïí <i>${new Date().toLocaleString()}</i>`
    );
  })();

  // Tambah nomor ke list dengan animasi
  const div = document.createElement("div");
  div.className = "list list-new";
  div.innerText = input.value;
  userList.appendChild(div);

  // Jalankan animasi fade in
  setTimeout(()=>div.classList.add("fade-in"), 10);

  // Animasi input fade out
  input.classList.add("input-added");
  setTimeout(()=>{
    input.classList.remove("input-added");
    input.value = ""; 
  }, 500);

  showToast("toastAdd"); 
}

// Fungsi hapus nomor
async function deleteData(n){  
  const input = document.getElementById("num");
  if(!n) return errorInput(input); 

  const start = performance.now();  

  if(!db.includes(n)){
    showToast("toastNotFound"); 
    return;
  }

  // Cari elemen list
  const listItems = Array.from(userList.children);
  const targetItem = listItems.find(li => li.innerText.includes(n));

  if(targetItem){
    targetItem.classList.add("list-removed");
    setTimeout(()=>targetItem.remove(), 500);
  }

  db = db.filter(x => x !== n);  
  await saveDB();  
  const logID = genLogID();  

  (async()=>{
    await sendTelegram(
      `üî¥ <b>EMPERIOR SYSTEM ¬∑ SECURITY</b>
      ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
      üö® <b>DATABASE PURGE</b>
      üì± <b>Target</b>
      <code>${n}</code>
      üì¶ <b>Remaining</b>
      ${db.length}
      üßæ <b>Log ID</b>
      <code>${logID}</code>
      üì± <b>Device</b>
      ${getDevice()} / ${getBrowser()}
      ‚è±Ô∏è <b>Exec Time</b>
      ${execTime(start)}
      üîê <b>Authority</b>
      Administrator
      üïí <i>${new Date().toLocaleString()}</i>
      ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`
    );
  })();

  showToast("toastDelete"); 
  input.value = ""; 
}

// Animasi list awal saat halaman load  
window.addEventListener("DOMContentLoaded",()=>{  
  const initialList = Array.from(userList.children);  
  initialList.forEach((el,i)=>{  
    setTimeout(()=>el.classList.add("fade-in"), i*100);  
  });  
});  
  
// SHOW TOAST  
function showToast(id){  
  const t = document.getElementById(id);  
  t.classList.add("show");  
  setTimeout(()=>t.classList.remove("show"),2000);  
}  
  
function createUser(){  
  const u=document.getElementById("user");  
  const p=document.getElementById("pass");  
  const r=document.getElementById("role");  
  if(!u.value)return errorInput(u);  
  if(!p.value)return errorInput(p);  
  if(!r.value)return errorInput(r);  
  const div=document.createElement("div");  
  div.className="list";  
  div.innerText=`${u.value} (${r.value})`;  
  userList.appendChild(div);  
  showToast("toastCreate");  
  u.value=""; p.value=""; r.value="";  
}  
  
// CHANGE PASSWORD  
function changePassword(){  
  const p=document.getElementById("newPass");  
  if(!p.value)return errorInput(p);  
  showToast("toastPass");  
  p.value=""; closeProfile();  
}  
  
// MENU UTAMA  
function scrollToMenu(){  
  toggleSide(); // cukup buka/tutup sidebar  
}  
  
// klik area luar ‚Üí dropdown nutup  
document.addEventListener("click", () => {  
  document.getElementById("roleOptions").classList.remove("show");  
});  
  
// LOGOUT  
function logout(){  
  sessionStorage.clear();  
  closeProfile(); toggleSide(); showToast("toastLogout");  
  setTimeout(() => { window.location.href = 'index.html'; }, 800);  
}  
  
// DEVELOPER LINKS TOGGLE  
const devToggle = document.querySelector(".sidebar a:nth-child(3)");  
const devLinks = document.querySelector(".dev-links");  
devLinks.style.display = "none"; // default hidden  
  
devToggle.addEventListener("click", ()=>{  
  devLinks.style.display = devLinks.style.display === "none" ? "block" : "none";  
});  
  
const roleSelect  = document.getElementById("roleSelect");  
const roleOptions = document.getElementById("roleOptions");  
const roleText    = document.getElementById("roleText");  
const roleInput   = document.getElementById("role");  
  
// buka dropdown  
roleSelect.addEventListener("click", function(e){  
  e.stopPropagation();  
  roleOptions.classList.toggle("show");  
});  
  
// pilih role  
roleOptions.addEventListener("click", function(e){  
  e.stopPropagation();  
  const item = e.target.closest("div");  
  if(!item) return;  
  
  const val = item.dataset.role;  
  roleText.textContent = val;  
  roleInput.value = val;  
  
  roleOptions.classList.remove("show");  
});  
  
// klik luar ‚Üí tutup  
document.addEventListener("click", function(){  
  roleOptions.classList.remove("show");  
});  
  
// Initial load  
loadDB();  
</script>
</body>
</html>
